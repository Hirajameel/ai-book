"use strict";(globalThis.webpackChunkfrontend_docu=globalThis.webpackChunkfrontend_docu||[]).push([[2369],{8453(e,n,i){i.d(n,{R:()=>a,x:()=>t});var s=i(6540);const r={},l=s.createContext(r);function a(e){const n=s.useContext(l);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),s.createElement(l.Provider,{value:n},e.children)}},8627(e,n,i){i.r(n),i.d(n,{assets:()=>o,contentTitle:()=>t,default:()=>u,frontMatter:()=>a,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"module-1-robotic-nervous-system/ros2-architecture-setup","title":"Chapter 2 - Technical Middleware Layers and Humble Configuration","description":"ROS 2 Humble Hawksbill Installation on Ubuntu 22.04","source":"@site/docs/module-1-robotic-nervous-system/ros2-architecture-setup.md","sourceDirName":"module-1-robotic-nervous-system","slug":"/module-1-robotic-nervous-system/ros2-architecture-setup","permalink":"/ai-book/docs/module-1-robotic-nervous-system/ros2-architecture-setup","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/module-1-robotic-nervous-system/ros2-architecture-setup.md","tags":[],"version":"current","frontMatter":{"title":"Chapter 2 - Technical Middleware Layers and Humble Configuration","sidebar_label":"Chapter 2 Technical Middleware Layers and Humble Configuration","id":"ros2-architecture-setup"},"sidebar":"tutorialSidebar","previous":{"title":"Chapter 1 Foundational Concepts and Biological Analogies","permalink":"/ai-book/docs/module-1-robotic-nervous-system/nervous-system-intro"},"next":{"title":"Chapter 3 Deep Dive into Topics, Services, and Actions","permalink":"/ai-book/docs/module-1-robotic-nervous-system/communication-patterns"}}');var r=i(4848),l=i(8453);const a={title:"Chapter 2 - Technical Middleware Layers and Humble Configuration",sidebar_label:"Chapter 2 Technical Middleware Layers and Humble Configuration",id:"ros2-architecture-setup"},t="Chapter 2: Technical Middleware Layers and Humble Configuration",o={},c=[{value:"ROS 2 Humble Hawksbill Installation on Ubuntu 22.04",id:"ros-2-humble-hawksbill-installation-on-ubuntu-2204",level:2},{value:"Prerequisites",id:"prerequisites",level:3},{value:"Installation Steps",id:"installation-steps",level:3},{value:"1. Set up the ROS 2 Repository",id:"1-set-up-the-ros-2-repository",level:4},{value:"2. Install ROS 2 Packages",id:"2-install-ros-2-packages",level:4},{value:"3. Install Additional Development Tools",id:"3-install-additional-development-tools",level:4},{value:"4. Initialize rosdep",id:"4-initialize-rosdep",level:4},{value:"Environment Setup",id:"environment-setup",level:3},{value:"ROS 2 Architecture Overview",id:"ros-2-architecture-overview",level:2},{value:"Nodes",id:"nodes",level:3},{value:"Topics and Messages",id:"topics-and-messages",level:3},{value:"Services",id:"services",level:3},{value:"Actions",id:"actions",level:3},{value:"Creating a Workspace",id:"creating-a-workspace",level:2},{value:"Package Structure",id:"package-structure",level:3},{value:"Building Packages",id:"building-packages",level:3},{value:"Quality of Service (QoS) Settings",id:"quality-of-service-qos-settings",level:2},{value:"Validated Code Examples",id:"validated-code-examples",level:2},{value:"Complete Minimal Publisher Example",id:"complete-minimal-publisher-example",level:3},{value:"Complete Minimal Subscriber Example",id:"complete-minimal-subscriber-example",level:3},{value:"Service Server Example",id:"service-server-example",level:3},{value:"Service Client Example",id:"service-client-example",level:3},{value:"Summary",id:"summary",level:3}];function d(e){const n={admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"chapter-2-technical-middleware-layers-and-humble-configuration",children:"Chapter 2: Technical Middleware Layers and Humble Configuration"})}),"\n",(0,r.jsx)(n.h2,{id:"ros-2-humble-hawksbill-installation-on-ubuntu-2204",children:"ROS 2 Humble Hawksbill Installation on Ubuntu 22.04"}),"\n",(0,r.jsx)(n.p,{children:"ROS 2 Humble Hawksbill is an LTS (Long Term Support) release that provides stability for robotic applications. This section provides a comprehensive guide for installation and initial configuration on Ubuntu 22.04."}),"\n",(0,r.jsx)(n.h3,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,r.jsx)(n.p,{children:"Before installing ROS 2 Humble, ensure your system meets the following requirements:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Ubuntu 22.04 LTS"}),"\n",(0,r.jsx)(n.li,{children:"At least 4GB RAM (8GB+ recommended for development)"}),"\n",(0,r.jsx)(n.li,{children:"At least 10GB free disk space"}),"\n",(0,r.jsx)(n.li,{children:"Internet connection for package downloads"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"installation-steps",children:"Installation Steps"}),"\n",(0,r.jsx)(n.h4,{id:"1-set-up-the-ros-2-repository",children:"1. Set up the ROS 2 Repository"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'# Add the ROS 2 GPG key\nsudo apt update && sudo apt install -y curl gnupg lsb-release\nsudo curl -sSL https://raw.githubusercontent.com/ros/rosdistro/master/ros.key -o /usr/share/keyrings/ros-archive-keyring.gpg\n\n# Add the repository to your sources list\necho "deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/ros-archive-keyring.gpg] http://packages.ros.org/ros2/ubuntu $(source /etc/os-release && echo $UBUNTU_CODENAME) main" | sudo tee /etc/apt/sources.list.d/ros2.list > /dev/null\n'})}),"\n",(0,r.jsx)(n.admonition,{type:"tip",children:(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Hardware Optimization"}),": For Jetson Orin Nano, consider using the NVIDIA ROS 2 packages which are optimized for ARM64 architecture and include hardware acceleration support."]})}),"\n",(0,r.jsx)(n.h4,{id:"2-install-ros-2-packages",children:"2. Install ROS 2 Packages"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"sudo apt update\nsudo apt install -y ros-humble-desktop\n"})}),"\n",(0,r.jsx)(n.p,{children:"This command installs the full desktop environment including RViz, Gazebo, and other development tools."}),"\n",(0,r.jsx)(n.h4,{id:"3-install-additional-development-tools",children:"3. Install Additional Development Tools"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"sudo apt install -y python3-colcon-common-extensions python3-rosdep python3-vcstool\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"colcon-common-extensions"}),": Build system for ROS 2 packages"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"rosdep"}),": Dependency management tool"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"vcstool"}),": Version control system tool for managing multiple repositories"]}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"4-initialize-rosdep",children:"4. Initialize rosdep"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"sudo rosdep init\nrosdep update\n"})}),"\n",(0,r.jsx)(n.h3,{id:"environment-setup",children:"Environment Setup"}),"\n",(0,r.jsxs)(n.p,{children:["To use ROS 2, you need to source the setup script. Add the following line to your ",(0,r.jsx)(n.code,{children:"~/.bashrc"})," file:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'echo "source /opt/ros/humble/setup.bash" >> ~/.bashrc\nsource ~/.bashrc\n'})}),"\n",(0,r.jsx)(n.h2,{id:"ros-2-architecture-overview",children:"ROS 2 Architecture Overview"}),"\n",(0,r.jsx)(n.h3,{id:"nodes",children:"Nodes"}),"\n",(0,r.jsx)(n.p,{children:"Nodes are the fundamental execution units in ROS 2. Each node represents a single process that performs specific functions. Nodes communicate with each other through:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Topics"}),": Publish/subscribe communication pattern"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Services"}),": Request/response communication pattern"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Actions"}),": Goal-oriented communication with feedback"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"import rclpy\nfrom rclpy.node import Node\n\nclass MinimalPublisher(Node):\n    def __init__(self):\n        super().__init__('minimal_publisher')\n        self.publisher_ = self.create_publisher(String, 'topic', 10)\n        timer_period = 0.5  # seconds\n        self.timer = self.create_timer(timer_period, self.timer_callback)\n\n    def timer_callback(self):\n        msg = String()\n        msg.data = 'Hello World'\n        self.publisher_.publish(msg)\n        self.get_logger().info('Publishing: \"%s\"' % msg.data)\n\ndef main(args=None):\n    rclpy.init(args=args)\n    minimal_publisher = MinimalPublisher()\n    rclpy.spin(minimal_publisher)\n    minimal_publisher.destroy_node()\n    rclpy.shutdown()\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,r.jsx)(n.h3,{id:"topics-and-messages",children:"Topics and Messages"}),"\n",(0,r.jsx)(n.p,{children:"Topics enable asynchronous communication between nodes using a publish/subscribe pattern. Messages are the data structures exchanged between nodes. ROS 2 provides standard message types and allows custom message definitions."}),"\n",(0,r.jsx)(n.h3,{id:"services",children:"Services"}),"\n",(0,r.jsx)(n.p,{children:"Services provide synchronous request/response communication. A service client sends a request to a service server, which processes the request and returns a response."}),"\n",(0,r.jsx)(n.h3,{id:"actions",children:"Actions"}),"\n",(0,r.jsx)(n.p,{children:"Actions are used for long-running tasks that require feedback, goal management, and the ability to cancel operations."}),"\n",(0,r.jsx)(n.h2,{id:"creating-a-workspace",children:"Creating a Workspace"}),"\n",(0,r.jsx)(n.p,{children:"A workspace is a directory where you modify and build ROS 2 packages. Here's how to create one:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Create workspace directory\nmkdir -p ~/ros2_ws/src\ncd ~/ros2_ws\n\n# Build the workspace (initially empty)\ncolcon build --packages-select\n"})}),"\n",(0,r.jsx)(n.h3,{id:"package-structure",children:"Package Structure"}),"\n",(0,r.jsx)(n.p,{children:"A typical ROS 2 package includes:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"my_robot_package/\n\u251c\u2500\u2500 CMakeLists.txt          # Build configuration\n\u251c\u2500\u2500 package.xml             # Package metadata\n\u251c\u2500\u2500 src/                    # Source code\n\u251c\u2500\u2500 include/                # Header files\n\u251c\u2500\u2500 launch/                 # Launch files\n\u251c\u2500\u2500 config/                 # Configuration files\n\u251c\u2500\u2500 test/                   # Test files\n\u2514\u2500\u2500 README.md               # Documentation\n"})}),"\n",(0,r.jsx)(n.h3,{id:"building-packages",children:"Building Packages"}),"\n",(0,r.jsxs)(n.p,{children:["Use ",(0,r.jsx)(n.code,{children:"colcon build"})," to compile your packages:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"cd ~/ros2_ws\ncolcon build --packages-select my_robot_package\nsource install/setup.bash\n"})}),"\n",(0,r.jsx)(n.h2,{id:"quality-of-service-qos-settings",children:"Quality of Service (QoS) Settings"}),"\n",(0,r.jsx)(n.p,{children:"QoS settings allow you to specify communication requirements for different types of data:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Reliability"}),": Best effort or reliable delivery"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Durability"}),": Volatile or transient local"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"History"}),": Keep last N messages or keep all"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Deadline"}),": Maximum time between consecutive messages"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Liveliness"}),": How to detect if a publisher is alive"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"from rclpy.qos import QoSProfile, ReliabilityPolicy, HistoryPolicy\n\n# Example: High-reliability for critical data\nqos_profile = QoSProfile(\n    reliability=ReliabilityPolicy.RELIABLE,\n    history=HistoryPolicy.KEEP_LAST,\n    depth=10\n)\n"})}),"\n",(0,r.jsx)(n.admonition,{type:"danger",children:(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Hardware Considerations"}),": When deploying to Jetson Orin Nano, be mindful of QoS settings as overly strict requirements may impact performance on embedded systems."]})}),"\n",(0,r.jsx)(n.h2,{id:"validated-code-examples",children:"Validated Code Examples"}),"\n",(0,r.jsx)(n.p,{children:"Here are additional code examples that have been validated for ROS 2 Humble:"}),"\n",(0,r.jsx)(n.h3,{id:"complete-minimal-publisher-example",children:"Complete Minimal Publisher Example"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"import rclpy\nfrom rclpy.node import Node\nfrom std_msgs.msg import String\n\nclass MinimalPublisher(Node):\n    def __init__(self):\n        super().__init__('minimal_publisher')\n        self.publisher_ = self.create_publisher(String, 'topic', 10)\n        timer_period = 0.5  # seconds\n        self.timer = self.create_timer(timer_period, self.timer_callback)\n        self.i = 0\n\n    def timer_callback(self):\n        msg = String()\n        msg.data = 'Hello World: %d' % self.i\n        self.publisher_.publish(msg)\n        self.get_logger().info('Publishing: \"%s\"' % msg.data)\n        self.i += 1\n\ndef main(args=None):\n    rclpy.init(args=args)\n    minimal_publisher = MinimalPublisher()\n    rclpy.spin(minimal_publisher)\n    minimal_publisher.destroy_node()\n    rclpy.shutdown()\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,r.jsx)(n.h3,{id:"complete-minimal-subscriber-example",children:"Complete Minimal Subscriber Example"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"import rclpy\nfrom rclpy.node import Node\nfrom std_msgs.msg import String\n\nclass MinimalSubscriber(Node):\n    def __init__(self):\n        super().__init__('minimal_subscriber')\n        self.subscription = self.create_subscription(\n            String,\n            'topic',\n            self.listener_callback,\n            10)\n        self.subscription  # prevent unused variable warning\n\n    def listener_callback(self, msg):\n        self.get_logger().info('I heard: \"%s\"' % msg.data)\n\ndef main(args=None):\n    rclpy.init(args=args)\n    minimal_subscriber = MinimalSubscriber()\n    rclpy.spin(minimal_subscriber)\n    minimal_subscriber.destroy_node()\n    rclpy.shutdown()\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,r.jsx)(n.h3,{id:"service-server-example",children:"Service Server Example"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"import rclpy\nfrom rclpy.node import Node\nfrom example_interfaces.srv import AddTwoInts\n\nclass MinimalService(Node):\n    def __init__(self):\n        super().__init__('minimal_service')\n        self.srv = self.create_service(AddTwoInts, 'add_two_ints', self.add_two_ints_callback)\n\n    def add_two_ints_callback(self, request, response):\n        response.sum = request.a + request.b\n        self.get_logger().info('Incoming request\\na: %d b: %d' % (request.a, request.b))\n        return response\n\ndef main(args=None):\n    rclpy.init(args=args)\n    minimal_service = MinimalService()\n    rclpy.spin(minimal_service)\n    rclpy.shutdown()\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,r.jsx)(n.h3,{id:"service-client-example",children:"Service Client Example"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"import sys\nimport rclpy\nfrom rclpy.node import Node\nfrom example_interfaces.srv import AddTwoInts\n\nclass MinimalClient(Node):\n    def __init__(self):\n        super().__init__('minimal_client')\n        self.cli = self.create_client(AddTwoInts, 'add_two_ints')\n        while not self.cli.wait_for_service(timeout_sec=1.0):\n            self.get_logger().info('service not available, waiting again...')\n        self.req = AddTwoInts.Request()\n\n    def send_request(self, a, b):\n        self.req.a = a\n        self.req.b = b\n        self.future = self.cli.call_async(self.req)\n        rclpy.spin_until_future_complete(self, self.future)\n        return self.future.result()\n\ndef main(args=None):\n    rclpy.init(args=args)\n    minimal_client = MinimalClient()\n    response = minimal_client.send_request(int(sys.argv[1]), int(sys.argv[2]))\n    minimal_client.get_logger().info(\n        'Result of add_two_ints: for %d + %d = %d' %\n        (int(sys.argv[1]), int(sys.argv[2]), response.sum))\n    minimal_client.destroy_node()\n    rclpy.shutdown()\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,r.jsx)(n.h3,{id:"summary",children:"Summary"}),"\n",(0,r.jsx)(n.p,{children:"This chapter covered the essential steps for installing and configuring ROS 2 Humble on Ubuntu 22.04. We explored the fundamental architectural concepts including nodes, topics, services, and actions. We also discussed workspace creation and QoS settings, which are crucial for humanoid robot applications requiring real-time performance and reliability."})]})}function u(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}}}]);