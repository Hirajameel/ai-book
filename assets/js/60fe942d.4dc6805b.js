"use strict";(globalThis.webpackChunkfrontend_docu=globalThis.webpackChunkfrontend_docu||[]).push([[7639],{8453(e,n,s){s.d(n,{R:()=>a,x:()=>t});var r=s(6540);const i={},o=r.createContext(i);function a(e){const n=r.useContext(o);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),r.createElement(o.Provider,{value:n},e.children)}},9916(e,n,s){s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>t,default:()=>u,frontMatter:()=>a,metadata:()=>r,toc:()=>l});const r=JSON.parse('{"id":"module-1-robotic-nervous-system/chapter-2-ros2-architecture/exercises/index","title":"Chapter 2: Hands-on Exercise","description":"Exercise: ROS 2 Environment Setup and Basic Node Creation","source":"@site/docs/module-1-robotic-nervous-system/chapter-2-ros2-architecture/exercises/index.md","sourceDirName":"module-1-robotic-nervous-system/chapter-2-ros2-architecture/exercises","slug":"/module-1-robotic-nervous-system/chapter-2-ros2-architecture/exercises/","permalink":"/ai-book/docs/module-1-robotic-nervous-system/chapter-2-ros2-architecture/exercises/","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/module-1-robotic-nervous-system/chapter-2-ros2-architecture/exercises/index.md","tags":[],"version":"current","frontMatter":{}}');var i=s(4848),o=s(8453);const a={},t="Chapter 2: Hands-on Exercise",c={},l=[{value:"Exercise: ROS 2 Environment Setup and Basic Node Creation",id:"exercise-ros-2-environment-setup-and-basic-node-creation",level:2},{value:"Objective",id:"objective",level:3},{value:"Prerequisites",id:"prerequisites",level:3},{value:"Part 1: Workspace Creation",id:"part-1-workspace-creation",level:3},{value:"Part 2: Package Creation",id:"part-2-package-creation",level:3},{value:"Part 3: Create a Publisher Node",id:"part-3-create-a-publisher-node",level:3},{value:"Part 4: Create a Subscriber Node",id:"part-4-create-a-subscriber-node",level:3},{value:"Part 5: Update Package Configuration",id:"part-5-update-package-configuration",level:3},{value:"Part 6: Build and Run",id:"part-6-build-and-run",level:3},{value:"Part 7: Understanding QoS Settings",id:"part-7-understanding-qos-settings",level:3},{value:"Discussion Questions",id:"discussion-questions",level:3},{value:"Troubleshooting Tips",id:"troubleshooting-tips",level:3}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"chapter-2-hands-on-exercise",children:"Chapter 2: Hands-on Exercise"})}),"\n",(0,i.jsx)(n.h2,{id:"exercise-ros-2-environment-setup-and-basic-node-creation",children:"Exercise: ROS 2 Environment Setup and Basic Node Creation"}),"\n",(0,i.jsx)(n.h3,{id:"objective",children:"Objective"}),"\n",(0,i.jsx)(n.p,{children:"Set up a ROS 2 environment and create your first ROS 2 nodes to understand the basic architecture."}),"\n",(0,i.jsx)(n.h3,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Ubuntu 22.04 with ROS 2 Humble installed"}),"\n",(0,i.jsx)(n.li,{children:"Basic knowledge of terminal commands"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"part-1-workspace-creation",children:"Part 1: Workspace Creation"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Create a new ROS 2 workspace:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"mkdir -p ~/ros2_ws/src\ncd ~/ros2_ws\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Build the empty workspace:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"colcon build --packages-select\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Source the workspace:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"source install/setup.bash\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"part-2-package-creation",children:"Part 2: Package Creation"}),"\n",(0,i.jsx)(n.p,{children:"Create a simple package for your exercises:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"cd ~/ros2_ws/src\nros2 pkg create --build-type ament_python my_robot_pkg\n"})}),"\n",(0,i.jsx)(n.h3,{id:"part-3-create-a-publisher-node",children:"Part 3: Create a Publisher Node"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Navigate to the package directory:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"cd ~/ros2_ws/src/my_robot_pkg/my_robot_pkg\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Create a publisher node file ",(0,i.jsx)(n.code,{children:"sensor_publisher.py"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"import rclpy\nfrom rclpy.node import Node\nfrom std_msgs.msg import String\n\nclass SensorPublisher(Node):\n    def __init__(self):\n        super().__init__('sensor_publisher')\n        self.publisher_ = self.create_publisher(String, 'sensor_data', 10)\n        timer_period = 0.5  # seconds\n        self.timer = self.create_timer(timer_period, self.timer_callback)\n        self.i = 0\n\n    def timer_callback(self):\n        msg = String()\n        msg.data = f'Sensor reading: {self.i}'\n        self.publisher_.publish(msg)\n        self.get_logger().info(f'Publishing: \"{msg.data}\"')\n        self.i += 1\n\ndef main(args=None):\n    rclpy.init(args=args)\n    sensor_publisher = SensorPublisher()\n    rclpy.spin(sensor_publisher)\n    sensor_publisher.destroy_node()\n    rclpy.shutdown()\n\nif __name__ == '__main__':\n    main()\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"part-4-create-a-subscriber-node",children:"Part 4: Create a Subscriber Node"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Create a subscriber node file ",(0,i.jsx)(n.code,{children:"motor_subscriber.py"}),":","\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"import rclpy\nfrom rclpy.node import Node\nfrom std_msgs.msg import String\n\nclass MotorSubscriber(Node):\n    def __init__(self):\n        super().__init__('motor_subscriber')\n        self.subscription = self.create_subscription(\n            String,\n            'motor_commands',\n            self.listener_callback,\n            10)\n        self.subscription  # prevent unused variable warning\n\n    def listener_callback(self, msg):\n        self.get_logger().info(f'Received motor command: \"{msg.data}\"')\n\ndef main(args=None):\n    rclpy.init(args=args)\n    motor_subscriber = MotorSubscriber()\n    rclpy.spin(motor_subscriber)\n    motor_subscriber.destroy_node()\n    rclpy.shutdown()\n\nif __name__ == '__main__':\n    main()\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"part-5-update-package-configuration",children:"Part 5: Update Package Configuration"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Update ",(0,i.jsx)(n.code,{children:"setup.py"})," in the package root to include your new nodes:","\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"import os\nfrom glob import glob\nfrom setuptools import setup\n\npackage_name = 'my_robot_pkg'\n\nsetup(\n    name=package_name,\n    version='0.0.0',\n    packages=[package_name],\n    data_files=[\n        ('share/ament_index/resource_index/packages',\n            ['resource/' + package_name]),\n        ('share/' + package_name, ['package.xml']),\n    ],\n    install_requires=['setuptools'],\n    zip_safe=True,\n    maintainer='your_name',\n    maintainer_email='your_email@example.com',\n    description='Simple robot package for learning ROS 2',\n    license='Apache License 2.0',\n    tests_require=['pytest'],\n    entry_points={\n        'console_scripts': [\n            'sensor_publisher = my_robot_pkg.sensor_publisher:main',\n            'motor_subscriber = my_robot_pkg.motor_subscriber:main',\n        ],\n    },\n)\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"part-6-build-and-run",children:"Part 6: Build and Run"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Build your package:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"cd ~/ros2_ws\ncolcon build --packages-select my_robot_pkg\nsource install/setup.bash\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Run the publisher in one terminal:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"ros2 run my_robot_pkg sensor_publisher\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"In another terminal, run the subscriber:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"ros2 run my_robot_pkg motor_subscriber\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"part-7-understanding-qos-settings",children:"Part 7: Understanding QoS Settings"}),"\n",(0,i.jsx)(n.p,{children:"Experiment with different QoS profiles to understand their impact:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Modify your publisher to use reliable QoS:","\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"from rclpy.qos import QoSProfile, ReliabilityPolicy, HistoryPolicy\n\nqos_profile = QoSProfile(\n    reliability=ReliabilityPolicy.RELIABLE,\n    history=HistoryPolicy.KEEP_LAST,\n    depth=10\n)\nself.publisher_ = self.create_publisher(String, 'sensor_data', qos_profile)\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"discussion-questions",children:"Discussion Questions"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"What happens when you run multiple instances of the publisher?"}),"\n",(0,i.jsx)(n.li,{children:"How does changing the QoS settings affect communication?"}),"\n",(0,i.jsx)(n.li,{children:"What would happen if you used a different topic name in publisher and subscriber?"}),"\n",(0,i.jsx)(n.li,{children:"How would you modify these nodes to work with real sensor data?"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"troubleshooting-tips",children:"Troubleshooting Tips"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Ensure you've sourced the ROS 2 environment: ",(0,i.jsx)(n.code,{children:"source /opt/ros/humble/setup.bash"})]}),"\n",(0,i.jsxs)(n.li,{children:["Check that your workspace is properly sourced: ",(0,i.jsx)(n.code,{children:"source install/setup.bash"})]}),"\n",(0,i.jsxs)(n.li,{children:["Use ",(0,i.jsx)(n.code,{children:"ros2 topic list"})," to verify topics are being published"]}),"\n",(0,i.jsxs)(n.li,{children:["Use ",(0,i.jsx)(n.code,{children:"ros2 node list"})," to verify nodes are running"]}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}}}]);