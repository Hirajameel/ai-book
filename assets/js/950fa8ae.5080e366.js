"use strict";(globalThis.webpackChunkfrontend_docu=globalThis.webpackChunkfrontend_docu||[]).push([[3002],{6206(n,i,e){e.r(i),e.d(i,{assets:()=>l,contentTitle:()=>a,default:()=>u,frontMatter:()=>r,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"module-1-robotic-nervous-system/urdf-validation-examples","title":"URDF Validation Examples","description":"This document provides examples and best practices for validating URDF files for humanoid robots.","source":"@site/docs/module-1-robotic-nervous-system/urdf-validation-examples.md","sourceDirName":"module-1-robotic-nervous-system","slug":"/module-1-robotic-nervous-system/urdf-validation-examples","permalink":"/ai-book/docs/module-1-robotic-nervous-system/urdf-validation-examples","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/module-1-robotic-nervous-system/urdf-validation-examples.md","tags":[],"version":"current","frontMatter":{}}');var o=e(4848),t=e(8453);const r={},a="URDF Validation Examples",l={},d=[{value:"Basic URDF Validation Commands",id:"basic-urdf-validation-commands",level:2},{value:"1. Syntax Validation",id:"1-syntax-validation",level:3},{value:"2. Kinematic Tree Generation",id:"2-kinematic-tree-generation",level:3},{value:"Common URDF Issues and Solutions",id:"common-urdf-issues-and-solutions",level:2},{value:"Issue 1: Missing Joint Definitions",id:"issue-1-missing-joint-definitions",level:3},{value:"Issue 2: Inconsistent Mass Properties",id:"issue-2-inconsistent-mass-properties",level:3},{value:"Issue 3: Invalid Joint Limits",id:"issue-3-invalid-joint-limits",level:3},{value:"Validation Script Example",id:"validation-script-example",level:2},{value:"Running the Validation",id:"running-the-validation",level:2},{value:"Common Validation Scenarios",id:"common-validation-scenarios",level:2},{value:"Scenario 1: Bipedal Walking Robot",id:"scenario-1-bipedal-walking-robot",level:3},{value:"Scenario 2: Upper Body Mobility",id:"scenario-2-upper-body-mobility",level:3},{value:"Scenario 3: Simulation vs Real Robot",id:"scenario-3-simulation-vs-real-robot",level:3},{value:"Troubleshooting Common Errors",id:"troubleshooting-common-errors",level:2},{value:"Error: &quot;No matching function&quot; in Gazebo",id:"error-no-matching-function-in-gazebo",level:3},{value:"Error: &quot;Joint state not found&quot;",id:"error-joint-state-not-found",level:3},{value:"Error: &quot;Inertia matrix not positive definite&quot;",id:"error-inertia-matrix-not-positive-definite",level:3}];function c(n){const i={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...n.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(i.header,{children:(0,o.jsx)(i.h1,{id:"urdf-validation-examples",children:"URDF Validation Examples"})}),"\n",(0,o.jsx)(i.p,{children:"This document provides examples and best practices for validating URDF files for humanoid robots."}),"\n",(0,o.jsx)(i.h2,{id:"basic-urdf-validation-commands",children:"Basic URDF Validation Commands"}),"\n",(0,o.jsx)(i.h3,{id:"1-syntax-validation",children:"1. Syntax Validation"}),"\n",(0,o.jsx)(i.pre,{children:(0,o.jsx)(i.code,{className:"language-bash",children:"# Check basic URDF syntax\ncheck_urdf simple_humanoid.urdf\n\n# Expected output should show:\n# robot name is: simple_humanoid\n# ---------- Successfully Parsed XML ---------------\n# root Link: base_link has 6 child links\n"})}),"\n",(0,o.jsx)(i.h3,{id:"2-kinematic-tree-generation",children:"2. Kinematic Tree Generation"}),"\n",(0,o.jsx)(i.pre,{children:(0,o.jsx)(i.code,{className:"language-bash",children:"# Generate kinematic tree visualization\nurdf_to_graphiz simple_humanoid.urdf\n\n# This creates:\n# - simple_humanoid.gv (Graphviz file)\n# - simple_humanoid.pdf (Visual diagram)\n"})}),"\n",(0,o.jsx)(i.h2,{id:"common-urdf-issues-and-solutions",children:"Common URDF Issues and Solutions"}),"\n",(0,o.jsx)(i.h3,{id:"issue-1-missing-joint-definitions",children:"Issue 1: Missing Joint Definitions"}),"\n",(0,o.jsx)(i.p,{children:(0,o.jsx)(i.strong,{children:"Problem:"})}),"\n",(0,o.jsx)(i.pre,{children:(0,o.jsx)(i.code,{className:"language-xml",children:'\x3c!-- Missing parent/child links --\x3e\n<joint name="missing_links" type="revolute">\n    \x3c!-- No parent or child specified --\x3e\n</joint>\n'})}),"\n",(0,o.jsx)(i.p,{children:(0,o.jsx)(i.strong,{children:"Solution:"})}),"\n",(0,o.jsx)(i.pre,{children:(0,o.jsx)(i.code,{className:"language-xml",children:'<joint name="correct_joint" type="revolute">\n    <parent link="base_link"/>\n    <child link="left_hip"/>\n    <origin xyz="0.0 -0.05 0.0" rpy="0 0 0"/>\n    <axis xyz="0 0 1"/>\n    <limit lower="-0.5" upper="0.5" effort="200" velocity="1"/>\n</joint>\n'})}),"\n",(0,o.jsx)(i.h3,{id:"issue-2-inconsistent-mass-properties",children:"Issue 2: Inconsistent Mass Properties"}),"\n",(0,o.jsx)(i.p,{children:(0,o.jsx)(i.strong,{children:"Problem:"})}),"\n",(0,o.jsx)(i.pre,{children:(0,o.jsx)(i.code,{className:"language-xml",children:'<link name="leg_link">\n    <inertial>\n        <mass value="0"/>  \x3c!-- Mass cannot be zero --\x3e\n        <origin xyz="0 0 0" rpy="0 0 0"/>\n        <inertia ixx="0" ixy="0" ixz="0" iyy="0" iyz="0" izz="0"/>  \x3c!-- All zeros --\x3e\n    </inertial>\n</link>\n'})}),"\n",(0,o.jsx)(i.p,{children:(0,o.jsx)(i.strong,{children:"Solution:"})}),"\n",(0,o.jsx)(i.pre,{children:(0,o.jsx)(i.code,{className:"language-xml",children:'<link name="leg_link">\n    <inertial>\n        <mass value="3.0"/>  \x3c!-- Positive mass value --\x3e\n        <origin xyz="0 0 -0.15" rpy="0 0 0"/>\n        <inertia ixx="0.02" ixy="0.0" ixz="0.0" iyy="0.02" iyz="0.0" izz="0.005"/>  \x3c!-- Calculated values --\x3e\n    </inertial>\n</link>\n'})}),"\n",(0,o.jsx)(i.h3,{id:"issue-3-invalid-joint-limits",children:"Issue 3: Invalid Joint Limits"}),"\n",(0,o.jsx)(i.p,{children:(0,o.jsx)(i.strong,{children:"Problem:"})}),"\n",(0,o.jsx)(i.pre,{children:(0,o.jsx)(i.code,{className:"language-xml",children:'<joint name="bad_limits" type="revolute">\n    <parent link="base_link"/>\n    <child link="hip"/>\n    <limit lower="1.0" upper="0.5" effort="100" velocity="1"/>  \x3c!-- Lower > Upper --\x3e\n</joint>\n'})}),"\n",(0,o.jsx)(i.p,{children:(0,o.jsx)(i.strong,{children:"Solution:"})}),"\n",(0,o.jsx)(i.pre,{children:(0,o.jsx)(i.code,{className:"language-xml",children:'<joint name="good_limits" type="revolute">\n    <parent link="base_link"/>\n    <child link="hip"/>\n    <limit lower="-0.5" upper="0.5" effort="100" velocity="1"/>  \x3c!-- Proper range --\x3e\n</joint>\n'})}),"\n",(0,o.jsx)(i.h2,{id:"validation-script-example",children:"Validation Script Example"}),"\n",(0,o.jsx)(i.p,{children:"Here's a comprehensive validation script:"}),"\n",(0,o.jsx)(i.pre,{children:(0,o.jsx)(i.code,{className:"language-python",children:"#!/usr/bin/env python3\nimport subprocess\nimport xml.etree.ElementTree as ET\nimport sys\nimport os\n\ndef validate_humanoid_urdf(urdf_path):\n    \"\"\"Comprehensive validation for humanoid URDF files\"\"\"\n    print(f\"Validating humanoid URDF: {urdf_path}\")\n\n    # 1. Basic syntax validation\n    print(\"\\n1. Checking URDF syntax...\")\n    try:\n        result = subprocess.run(['check_urdf', urdf_path],\n                              capture_output=True, text=True)\n        if result.returncode == 0:\n            print(\"\u2713 Syntax validation passed\")\n        else:\n            print(f\"\u2717 Syntax validation failed: {result.stderr}\")\n            return False\n    except FileNotFoundError:\n        print(\"\u2717 check_urdf command not found - is ROS installed?\")\n        return False\n\n    # 2. Parse XML structure\n    print(\"\\n2. Analyzing URDF structure...\")\n    try:\n        tree = ET.parse(urdf_path)\n        root = tree.getroot()\n\n        # Check for robot name\n        robot_name = root.get('name')\n        if not robot_name:\n            print(\"\u2717 Missing robot name\")\n            return False\n        print(f\"\u2713 Robot name: {robot_name}\")\n\n        # Find all links and joints\n        links = root.findall('.//link')\n        joints = root.findall('.//joint')\n\n        print(f\"\u2713 Found {len(links)} links and {len(joints)} joints\")\n\n        # Check for essential humanoid components\n        link_names = [link.get('name').lower() for link in links]\n        joint_names = [joint.get('name').lower() for joint in joints]\n\n        essential_checks = [\n            ('torso', any('torso' in name or 'base' in name for name in link_names)),\n            ('head', any('head' in name for name in link_names)),\n            ('left leg', any('left' in name and ('hip' in name or 'leg' in name) for name in joint_names)),\n            ('right leg', any('right' in name and ('hip' in name or 'leg' in name) for name in joint_names)),\n            ('left foot', any('left' in name and 'foot' in name for name in link_names)),\n            ('right foot', any('right' in name and 'foot' in name for name in link_names)),\n        ]\n\n        print(\"\\n3. Essential humanoid components:\")\n        all_present = True\n        for component, present in essential_checks:\n            status = \"\u2713\" if present else \"\u2717\"\n            print(f\"  {status} {component}: {'Present' if present else 'Missing'}\")\n            if not present:\n                all_present = False\n\n        if not all_present:\n            print(\"\u2717 Some essential humanoid components are missing\")\n            return False\n\n        # Check joint limits validity\n        print(\"\\n4. Validating joint limits...\")\n        joints_with_issues = []\n\n        for joint in joints:\n            joint_type = joint.get('type')\n            if joint_type in ['revolute', 'prismatic']:  # These have limits\n                limit_elem = joint.find('limit')\n                if limit_elem is not None:\n                    lower = float(limit_elem.get('lower', 0))\n                    upper = float(limit_elem.get('upper', 0))\n\n                    if lower > upper:\n                        joints_with_issues.append(f\"{joint.get('name')}: lower({lower}) > upper({upper})\")\n\n        if joints_with_issues:\n            print(\"\u2717 Joint limit issues found:\")\n            for issue in joints_with_issues:\n                print(f\"    - {issue}\")\n            return False\n        else:\n            print(\"\u2713 All joint limits are valid\")\n\n        # Check mass properties\n        print(\"\\n5. Validating mass properties...\")\n        links_with_issues = []\n\n        for link in links:\n            inertial = link.find('inertial')\n            if inertial is not None:\n                mass_elem = inertial.find('mass')\n                if mass_elem is not None:\n                    mass = float(mass_elem.get('value', 0))\n                    if mass <= 0:\n                        links_with_issues.append(f\"{link.get('name')}: mass must be positive\")\n\n        if links_with_issues:\n            print(\"\u2717 Mass property issues found:\")\n            for issue in links_with_issues:\n                print(f\"    - {issue}\")\n            return False\n        else:\n            print(\"\u2713 All mass properties are valid\")\n\n        print(\"\\n\u2713 All validations passed! URDF is ready for humanoid robot applications.\")\n        return True\n\n    except ET.ParseError as e:\n        print(f\"\u2717 XML parsing error: {e}\")\n        return False\n    except Exception as e:\n        print(f\"\u2717 Validation error: {e}\")\n        return False\n\ndef main():\n    if len(sys.argv) != 2:\n        print(\"Usage: python3 validate_humanoid_urdf.py <urdf_file>\")\n        sys.exit(1)\n\n    urdf_file = sys.argv[1]\n    if not os.path.exists(urdf_file):\n        print(f\"Error: File {urdf_file} does not exist\")\n        sys.exit(1)\n\n    success = validate_humanoid_urdf(urdf_file)\n    sys.exit(0 if success else 1)\n\nif __name__ == \"__main__\":\n    main()\n"})}),"\n",(0,o.jsx)(i.h2,{id:"running-the-validation",children:"Running the Validation"}),"\n",(0,o.jsxs)(i.p,{children:["Save the validation script as ",(0,o.jsx)(i.code,{children:"validate_humanoid_urdf.py"})," and run:"]}),"\n",(0,o.jsx)(i.pre,{children:(0,o.jsx)(i.code,{className:"language-bash",children:"chmod +x validate_humanoid_urdf.py\npython3 validate_humanoid_urdf.py your_humanoid_robot.urdf\n"})}),"\n",(0,o.jsx)(i.h2,{id:"common-validation-scenarios",children:"Common Validation Scenarios"}),"\n",(0,o.jsx)(i.h3,{id:"scenario-1-bipedal-walking-robot",children:"Scenario 1: Bipedal Walking Robot"}),"\n",(0,o.jsx)(i.p,{children:"For a bipedal humanoid robot, ensure:"}),"\n",(0,o.jsxs)(i.ul,{children:["\n",(0,o.jsx)(i.li,{children:"Hip joints have appropriate range for walking"}),"\n",(0,o.jsx)(i.li,{children:"Knee joints only bend in one direction (positive angles)"}),"\n",(0,o.jsx)(i.li,{children:"Ankle joints have limited range for stability"}),"\n",(0,o.jsx)(i.li,{children:"Mass distribution supports bipedal balance"}),"\n"]}),"\n",(0,o.jsx)(i.h3,{id:"scenario-2-upper-body-mobility",children:"Scenario 2: Upper Body Mobility"}),"\n",(0,o.jsx)(i.p,{children:"For humanoid robots with arm mobility:"}),"\n",(0,o.jsxs)(i.ul,{children:["\n",(0,o.jsx)(i.li,{children:"Shoulder joints should have 3DOF (or multiple 1DOF joints)"}),"\n",(0,o.jsx)(i.li,{children:"Elbow joints should have appropriate flexion range"}),"\n",(0,o.jsx)(i.li,{children:"Hand/wrist joints should support manipulation tasks"}),"\n"]}),"\n",(0,o.jsx)(i.h3,{id:"scenario-3-simulation-vs-real-robot",children:"Scenario 3: Simulation vs Real Robot"}),"\n",(0,o.jsx)(i.p,{children:"Remember to validate for both contexts:"}),"\n",(0,o.jsxs)(i.ul,{children:["\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.strong,{children:"Simulation"}),": Can use simplified geometries"]}),"\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.strong,{children:"Real Robot"}),": Must match physical constraints and safety limits"]}),"\n"]}),"\n",(0,o.jsx)(i.h2,{id:"troubleshooting-common-errors",children:"Troubleshooting Common Errors"}),"\n",(0,o.jsx)(i.h3,{id:"error-no-matching-function-in-gazebo",children:'Error: "No matching function" in Gazebo'}),"\n",(0,o.jsxs)(i.ul,{children:["\n",(0,o.jsx)(i.li,{children:"Solution: Ensure all joint types are supported by your simulator"}),"\n",(0,o.jsx)(i.li,{children:"Check that plugin configurations are correct"}),"\n"]}),"\n",(0,o.jsx)(i.h3,{id:"error-joint-state-not-found",children:'Error: "Joint state not found"'}),"\n",(0,o.jsxs)(i.ul,{children:["\n",(0,o.jsx)(i.li,{children:"Solution: Verify joint names match between URDF and controller configuration"}),"\n",(0,o.jsx)(i.li,{children:"Check that joint state publisher is properly configured"}),"\n"]}),"\n",(0,o.jsx)(i.h3,{id:"error-inertia-matrix-not-positive-definite",children:'Error: "Inertia matrix not positive definite"'}),"\n",(0,o.jsxs)(i.ul,{children:["\n",(0,o.jsx)(i.li,{children:"Solution: Ensure inertia values follow the rules for physical objects"}),"\n",(0,o.jsx)(i.li,{children:"Use proper formulas for basic geometric shapes"}),"\n"]}),"\n",(0,o.jsx)(i.p,{children:"This validation process ensures your humanoid robot URDF is correct and ready for both simulation and real-world applications."})]})}function u(n={}){const{wrapper:i}={...(0,t.R)(),...n.components};return i?(0,o.jsx)(i,{...n,children:(0,o.jsx)(c,{...n})}):c(n)}},8453(n,i,e){e.d(i,{R:()=>r,x:()=>a});var s=e(6540);const o={},t=s.createContext(o);function r(n){const i=s.useContext(t);return s.useMemo(function(){return"function"==typeof n?n(i):{...i,...n}},[i,n])}function a(n){let i;return i=n.disableParentContext?"function"==typeof n.components?n.components(o):n.components||o:r(n.components),s.createElement(t.Provider,{value:i},n.children)}}}]);