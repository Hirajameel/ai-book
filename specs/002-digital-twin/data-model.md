# Data Model: Module 2 - The Digital Twin (Gazebo & Unity)

## Entity Relationships

### Digital Twin Architecture Components

- **Gazebo Simulation Environment**: Core physics engine handling rigid body dynamics, gravity, and collision detection
  - Contains: World definitions, robot models, sensor configurations
  - Relationships: Connected to Unity visualization layer via ROS-TCP-Connector

- **Unity Visualization Layer**: High-fidelity rendering engine for visual representation
  - Contains: 3D models, materials, lighting, camera systems
  - Relationships: Receives state data from Gazebo, sends user interaction data back

- **ROS 2 Communication Layer**: Middleware facilitating data exchange between systems
  - Contains: Topics, services, actions, message definitions
  - Relationships: Connects all simulation components, handles sensor data flow

### Sensor Data Entities

- **LiDAR Point Cloud**: 3D spatial data representing environment geometry
  - Attributes: Point coordinates (x, y, z), intensity values, timestamp
  - Relationships: Generated by ray tracing in Gazebo physics engine

- **Depth Camera Data**: RGB-D information combining color and depth perception
  - Attributes: RGB pixel values, depth measurements, camera parameters
  - Relationships: Simulated using Gazebo's camera plugins with Unity visualization

- **IMU Readings**: Inertial measurement data for balance and orientation
  - Attributes: Acceleration (x, y, z), angular velocity (x, y, z), orientation quaternion
  - Relationships: Integrated into robot control systems for stability

## State Transitions

### Simulation States

1. **Initialization**: Environment and robot models loaded, physics parameters configured
2. **Ready**: All systems connected, waiting for control commands
3. **Running**: Physics simulation active, real-time updates occurring
4. **Paused**: Simulation suspended, state preserved
5. **Stopped**: Simulation terminated, resources released

### Robot States (Humanoid Specific)

1. **Static Balance**: Robot maintaining stable stance with COM within support polygon
2. **Dynamic Motion**: Robot executing planned movements with active balance control
3. **Recovery**: Robot correcting for disturbances or balance loss
4. **Idle**: Robot in low-power state, ready for commands

## Validation Rules

- All URDF/SDF configurations must pass validation checks using official ROS 2 tools
- Physics parameters (mass, inertia, friction) must be physically realistic and positive
- Sensor data must conform to standard ROS 2 message types (sensor_msgs, nav_msgs)
- Communication topics must follow ROS 2 naming conventions and type definitions
- Unity visualization must accurately reflect Gazebo physics state within acceptable latency bounds